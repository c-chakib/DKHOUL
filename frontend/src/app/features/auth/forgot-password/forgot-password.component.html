<div class="forgot-password-container">
  <mat-card class="forgot-password-card">
    <mat-card-header>
      <div class="logo">
        <mat-icon class="logo-icon">lock_reset</mat-icon>
        <h1>DKHOUL</h1>
      </div>
    </mat-card-header>

    <mat-card-content>
      <ng-container *ngIf="!emailSent">
        <div class="header-section">
          <h2>Forgot Password?</h2>
          <p class="subtitle">
            No worries! Enter your email address and we'll send you instructions to reset your password.
          </p>
        </div>

        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email Address</mat-label>
            <input 
              matInput 
              type="email"
              formControlName="email"
              placeholder="Enter your registered email"
              [disabled]="loading"
            >
            <mat-icon matPrefix>email</mat-icon>
            <mat-error *ngIf="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched">
              {{ getErrorMessage('email') }}
            </mat-error>
          </mat-form-field>

          <button 
            mat-raised-button 
            color="primary" 
            type="submit"
            [disabled]="loading || forgotPasswordForm.invalid"
            class="submit-button"
          >
            <span *ngIf="!loading">Send Reset Link</span>
            <mat-spinner *ngIf="loading" diameter="24"></mat-spinner>
          </button>
        </form>

        <div class="back-to-login">
          <mat-icon>arrow_back</mat-icon>
          <a routerLink="/auth/login">Back to Login</a>
        </div>
      </ng-container>

      <ng-container *ngIf="emailSent">
        <div class="success-message">
          <mat-icon class="success-icon">mark_email_read</mat-icon>
          <h2>Check Your Email</h2>
          <p>
            We've sent password reset instructions to <strong>{{ forgotPasswordForm.value.email }}</strong>
          </p>
          <p class="instruction">
            Please check your inbox and follow the link to reset your password. The link will expire in 1 hour.
          </p>

          <div class="action-buttons">
            <button mat-raised-button color="primary" routerLink="/auth/login">
              <mat-icon>login</mat-icon>
              Back to Login
            </button>
            <button mat-stroked-button (click)="resendEmail()">
              <mat-icon>refresh</mat-icon>
              Resend Email
            </button>
          </div>

          <div class="help-text">
            <mat-icon>info</mat-icon>
            <span>Didn't receive the email? Check your spam folder or try resending.</span>
          </div>
        </div>
      </ng-container>
    </mat-card-content>
  </mat-card>

  <!-- Info Cards -->
  <div class="info-cards">
    <div class="info-card">
      <mat-icon>security</mat-icon>
      <h3>Secure Process</h3>
      <p>Your password reset link is encrypted and expires after 1 hour for your security.</p>
    </div>
    <div class="info-card">
      <mat-icon>support_agent</mat-icon>
      <h3>Need Help?</h3>
      <p>Contact our support team 24/7 if you have any issues accessing your account.</p>
    </div>
  </div>
</div>
