<!-- Login Page - Material Design 3 -->
<div class="md-auth">
  <div class="md-auth__container">
    <!-- Login Card -->
    <div class="md-auth-card elevation-z3">
      <!-- Header -->
      <div class="md-auth-card__header">
        <div class="md-auth-card__logo">
          <h1 class="md-typescale-headline-large">DKHOUL</h1>
          <p class="md-auth-card__tagline md-typescale-body-medium">Morocco's Premier Marketplace</p>
        </div>
      </div>

      <!-- Content -->
      <div class="md-auth-card__content">
        <h2 class="md-auth-card__title md-typescale-headline-medium">Welcome Back</h2>
        <p class="md-auth-card__subtitle md-typescale-body-large">Sign in to continue to your account</p>

        <!-- Login Form -->
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="md-form">
          <!-- Email Field -->
          <div class="md-form-field">
            <label for="email" class="md-form-field__label md-typescale-body-small">Email Address</label>
            <div class="md-form-field__input-wrapper">
              <span class="material-icons md-form-field__icon">email</span>
              <input 
                id="email"
                type="email" 
                formControlName="email"
                placeholder="Enter your email"
                autocomplete="email"
                class="md-form-field__input"
                [class.md-form-field__input--error]="email?.invalid && email?.touched"
              >
            </div>
            <span class="md-form-field__error md-typescale-body-small" *ngIf="email?.invalid && email?.touched">
              {{ getErrorMessage('email') }}
            </span>
          </div>

          <!-- Password Field -->
          <div class="md-form-field">
            <label for="password" class="md-form-field__label md-typescale-body-small">Password</label>
            <div class="md-form-field__input-wrapper">
              <span class="material-icons md-form-field__icon">lock</span>
              <input 
                id="password"
                [type]="hidePassword ? 'password' : 'text'"
                formControlName="password"
                placeholder="Enter your password"
                autocomplete="current-password"
                class="md-form-field__input"
                [class.md-form-field__input--error]="password?.invalid && password?.touched"
              >
              <button 
                type="button"
                class="md-form-field__toggle-btn"
                (click)="hidePassword = !hidePassword"
                [attr.aria-label]="'Toggle password visibility'"
              >
                <span class="material-icons">{{ hidePassword ? 'visibility_off' : 'visibility' }}</span>
              </button>
            </div>
            <span class="md-form-field__error md-typescale-body-small" *ngIf="password?.invalid && password?.touched">
              {{ getErrorMessage('password') }}
            </span>
          </div>

          <!-- Form Options -->
          <div class="md-form-options">
            <label class="md-checkbox">
              <input type="checkbox" formControlName="rememberMe" class="md-checkbox__input">
              <span class="md-checkbox__label md-typescale-body-medium">Remember me</span>
            </label>
            <a routerLink="/auth/forgot-password" class="md-link md-typescale-body-medium">
              Forgot Password?
            </a>
          </div>

          <!-- Submit Button -->
          <button 
            type="submit"
            class="md-btn md-btn--filled md-btn--primary md-btn--full-width"
            [disabled]="loading"
            [class.md-btn--loading]="loading"
          >
            <span class="md-btn__label" *ngIf="!loading">Sign In</span>
            <span class="md-btn__loader" *ngIf="loading">
              <span class="md-spinner"></span>
            </span>
          </button>
        </form>

        <!-- Divider -->
        <div class="md-divider">
          <span class="md-divider__text md-typescale-body-small">or</span>
        </div>

        <!-- Social Login -->
        <div class="md-social-login">
          <button type="button" class="md-btn md-btn--outlined md-btn--full-width md-social-btn" (click)="handleGoogleSignIn()">
            <img src="assets/icons/google.svg" alt="Google" class="md-social-btn__icon">
            <span class="md-btn__label">Continue with Google</span>
          </button>
          <button type="button" class="md-btn md-btn--outlined md-btn--full-width md-social-btn">
            <img src="assets/icons/facebook.svg" alt="Facebook" class="md-social-btn__icon">
            <span class="md-btn__label">Continue with Facebook</span>
          </button>
        </div>

        <!-- Sign Up Link -->
        <div class="md-auth-card__footer">
          <p class="md-typescale-body-medium">
            Don't have an account? 
            <a routerLink="/auth/register" class="md-link md-link--bold">Sign Up</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Features Section -->
    <div class="md-features">
      <div class="md-feature-card elevation-z2">
        <div class="md-feature-card__icon-wrapper">
          <span class="material-icons md-feature-card__icon">verified_user</span>
        </div>
        <h3 class="md-feature-card__title md-typescale-title-medium">Secure & Trusted</h3>
        <p class="md-feature-card__description md-typescale-body-medium">Your data is protected with industry-standard encryption</p>
      </div>
      
      <div class="md-feature-card elevation-z2">
        <div class="md-feature-card__icon-wrapper">
          <span class="material-icons md-feature-card__icon">explore</span>
        </div>
        <h3 class="md-feature-card__title md-typescale-title-medium">Discover Morocco</h3>
        <p class="md-feature-card__description md-typescale-body-medium">Access thousands of unique experiences and services</p>
      </div>
      
      <div class="md-feature-card elevation-z2">
        <div class="md-feature-card__icon-wrapper">
          <span class="material-icons md-feature-card__icon">support_agent</span>
        </div>
        <h3 class="md-feature-card__title md-typescale-title-medium">24/7 Support</h3>
        <p class="md-feature-card__description md-typescale-body-medium">Our team is always here to help you</p>
      </div>
    </div>
  </div>
</div>
