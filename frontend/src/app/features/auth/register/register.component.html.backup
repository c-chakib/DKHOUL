<!-- Modern Compact Register Page - Material Design 3 -->
<div class="register-page">
  <div class="register-container">
    <!-- Left Side - Branding & Features -->
    <div class="register-brand">
      <div class="brand-content">
        <div class="brand-logo">
          <h1>DKHOUL</h1>
          <p class="brand-tagline">Morocco's Premier Marketplace</p>
        </div>
        
        <div class="brand-features">
          <div class="feature-item">
            <span class="material-icons">verified_user</span>
            <div>
              <h3>Secure & Trusted</h3>
              <p>Your data protected with encryption</p>
            </div>
          </div>
          <div class="feature-item">
            <span class="material-icons">explore</span>
            <div>
              <h3>Discover Morocco</h3>
              <p>Thousands of unique experiences</p>
            </div>
          </div>
          <div class="feature-item">
            <span class="material-icons">support_agent</span>
            <div>
              <h3>24/7 Support</h3>
              <p>Always here to help you</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Side - Registration Form -->
    <div class="register-form-wrapper">
      <div class="register-form-container">
        <div class="form-header">
          <h2>Create Account</h2>
          <p>Join us and start your journey</p>
        </div>

        <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="register-form">
          <!-- Name Fields - Side by Side -->
          <div class="form-row">
            <div class="form-field">
              <label for="firstName">First Name</label>
              <div class="input-wrapper">
                <span class="material-icons">person</span>
                <input
                  id="firstName"
                  type="text"
                  formControlName="firstName"
                  placeholder="John"
                  [class.error]="firstName?.invalid && firstName?.touched"
                />
              </div>
              <span class="error-message" *ngIf="firstName?.invalid && firstName?.touched">
                {{ getErrorMessage('firstName') }}
              </span>
            </div>

            <div class="form-field">
              <label for="lastName">Last Name</label>
              <div class="input-wrapper">
                <span class="material-icons">person</span>
                <input
                  id="lastName"
                  type="text"
                  formControlName="lastName"
                  placeholder="Doe"
                  [class.error]="lastName?.invalid && lastName?.touched"
                />
              </div>
              <span class="error-message" *ngIf="lastName?.invalid && lastName?.touched">
                {{ getErrorMessage('lastName') }}
              </span>
            </div>
          </div>

          <!-- Email -->
          <div class="form-field">
            <label for="email">Email Address</label>
            <div class="input-wrapper">
              <span class="material-icons">email</span>
              <input
                id="email"
                type="email"
                formControlName="email"
                placeholder="john@example.com"
                [class.error]="email?.invalid && email?.touched"
              />
            </div>
            <span class="error-message" *ngIf="email?.invalid && email?.touched">
              {{ getErrorMessage('email') }}
            </span>
          </div>

          <!-- Phone -->
          <div class="form-field">
            <label for="phone">Phone Number</label>
            <div class="input-wrapper">
              <span class="material-icons">phone</span>
              <input
                id="phone"
                type="tel"
                formControlName="phone"
                placeholder="+212 6XX XXX XXX"
                [class.error]="phone?.invalid && phone?.touched"
              />
            </div>
            <span class="error-message" *ngIf="phone?.invalid && phone?.touched">
              {{ getErrorMessage('phone') }}
            </span>
          </div>

          <!-- Password -->
          <div class="form-field">
            <label for="password">Password</label>
            <div class="input-wrapper">
              <span class="material-icons">lock</span>
              <input
                id="password"
                [type]="hidePassword ? 'password' : 'text'"
                formControlName="password"
                placeholder="••••••••"
                [class.error]="password?.invalid && password?.touched"
              />
              <button
                type="button"
                class="toggle-password"
                (click)="hidePassword = !hidePassword"
                tabindex="-1"
              >
                <span class="material-icons">{{ hidePassword ? 'visibility_off' : 'visibility' }}</span>
              </button>
            </div>
            <span class="error-message" *ngIf="password?.invalid && password?.touched">
              {{ getErrorMessage('password') }}
            </span>
          </div>

          <!-- Confirm Password -->
          <div class="form-field">
            <label for="confirmPassword">Confirm Password</label>
            <div class="input-wrapper">
              <span class="material-icons">lock</span>
              <input
                id="confirmPassword"
                [type]="hideConfirmPassword ? 'password' : 'text'"
                formControlName="confirmPassword"
                placeholder="••••••••"
                [class.error]="confirmPassword?.invalid && confirmPassword?.touched"
              />
              <button
                type="button"
                class="toggle-password"
                (click)="hideConfirmPassword = !hideConfirmPassword"
                tabindex="-1"
              >
                <span class="material-icons">{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</span>
              </button>
            </div>
            <span class="error-message" *ngIf="confirmPassword?.invalid && confirmPassword?.touched">
              {{ getErrorMessage('confirmPassword') }}
            </span>
          </div>

          <!-- Role Selection -->
          <div class="form-field">
            <label>I want to</label>
            <div class="role-selector">
              <label class="role-option" [class.selected]="role?.value === 'tourist'">
                <input type="radio" formControlName="role" value="tourist" />
                <div class="role-card">
                  <span class="material-icons">explore</span>
                  <span>Discover Services</span>
                </div>
              </label>
              <label class="role-option" [class.selected]="role?.value === 'provider'">
                <input type="radio" formControlName="role" value="provider" />
                <div class="role-card">
                  <span class="material-icons">business</span>
                  <span>Offer Services</span>
                </div>
              </label>
            </div>
          </div>

          <!-- Terms Agreement -->
          <label class="checkbox-field">
            <input type="checkbox" formControlName="agreeToTerms" />
            <span>
              I agree to the <a routerLink="/terms">Terms & Conditions</a> and <a routerLink="/privacy">Privacy Policy</a>
            </span>
          </label>

          <!-- Submit Button -->
          <button
            type="submit"
            class="submit-btn"
            [disabled]="loading || !registrationForm.valid"
            [class.loading]="loading"
          >
            <span *ngIf="!loading">Create Account</span>
            <span *ngIf="loading" class="spinner"></span>
          </button>

          <!-- Login Link -->
          <div class="form-footer">
            <p>
              Already have an account?
              <a routerLink="/auth/login" class="login-link">Sign In</a>
            </p>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
